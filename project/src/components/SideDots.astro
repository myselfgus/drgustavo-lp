---
// Side dots navigation component
const sections = [
  { id: 'hero', label: 'Início' },
  { id: 'manifesto', label: 'Manifesto' },
  { id: 'para-quem', label: 'Para Quem' },
  { id: 'metodo', label: 'Método' },
  { id: 'credenciais', label: 'Credenciais' },
  { id: 'contato', label: 'Contato' }
];
---

<nav class="side-dots" aria-label="Navegação entre seções">
  {sections.map((section, index) => (
    <button
      class="dot"
      data-section={section.id}
      aria-label={`Ir para ${section.label}`}
      data-index={index}
    >
      <span class="dot-indicator"></span>
      <span class="dot-label">{section.label}</span>
    </button>
  ))}
</nav>

<script>
  const dots = document.querySelectorAll<HTMLButtonElement>('.side-dots .dot');
  const sectionElements = document.querySelectorAll<HTMLElement>('section[id]');
  
  // Smooth scroll to section
  dots.forEach((dot) => {
    dot.addEventListener('click', () => {
      const sectionId = dot.dataset.section;
      if (!sectionId) {
        return;
      }
      const section = document.getElementById(sectionId);
      if (section) {
        section.scrollIntoView({ behavior: 'smooth' });
      }
    });
  });
  
  // Update active dot on scroll
  const observerOptions = {
    threshold: 0.5,
    rootMargin: '0px 0px -50% 0px'
  };
  
  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        const sectionId = entry.target.id;
        dots.forEach((dot) => {
          if (dot.dataset.section === sectionId) {
            dot.classList.add('active');
          } else {
            dot.classList.remove('active');
          }
        });
      }
    });
  }, observerOptions);
  
  sectionElements.forEach((section) => observer.observe(section));
</script>

<style>
  .side-dots {
    position: fixed;
    right: 40px;
    top: 50%;
    transform: translateY(-50%);
    z-index: 100;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }
  
  .dot {
    position: relative;
    background: none;
    border: none;
    padding: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  
  .dot-indicator {
    display: block;
    width: 4px;
    height: 4px;
    background: #CCCCCC;
    border-radius: 50%;
    transition: all 0.3s ease;
  }
  
  .dot.active .dot-indicator {
    width: 6px;
    height: 6px;
    background: var(--text-primary, #2C2C2C);
  }
  
  .dot-label {
    position: absolute;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    background: var(--bg-primary, #FFFFFF);
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    color: var(--text-primary, #2C2C2C);
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: all 0.2s ease;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  
  .dot:hover .dot-label {
    opacity: 1;
    right: 24px;
  }
  
  @media (max-width: 768px) {
    .side-dots {
      display: none;
    }
  }
</style>
