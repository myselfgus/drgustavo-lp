/* ============================================
   OTIMIZAÇÕES MOBILE
   Design: Performance e UX otimizadas
   ============================================ */

/* ====================
   VIEWPORT FIXES
   ==================== */

/* Fix para viewport height no iOS (100vh bugs) */
html {
  height: -webkit-fill-available;
}

body {
  min-height: 100vh;
  min-height: -webkit-fill-available;
}

/* Prevenir zoom em inputs no iOS */
@media (max-width: 767px) {
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  textarea,
  select {
    font-size: 16px !important; /* iOS não zoomeia se >= 16px */
  }
}

/* ====================
   TOUCH TARGETS
   ==================== */

/* Aumentar área de toque (min 44x44px recomendado) */
@media (max-width: 767px) {
  button,
  a[href],
  input[type="submit"],
  input[type="button"],
  label[for] {
    min-height: 44px;
    min-width: 44px;
    padding: 12px 16px;
  }

  /* Links em texto: padding invisível para maior área de toque */
  p a,
  li a {
    padding: 8px 4px;
    margin: -8px -4px;
  }
}

/* ====================
   SCROLL PERFORMANCE
   ==================== */

/* Scroll suave e performático no iOS */
@media (max-width: 767px) {
  body,
  .chat-messages,
  .entregaveis__grid {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }

  /* Prevenir scroll horizontal acidental */
  body {
    overflow-x: hidden;
  }
}

/* ====================
   SPACING MOBILE
   ==================== */

@media (max-width: 767px) {
  /* Padding consistente em mobile */
  section {
    padding-inline: clamp(20px, 5vw, 32px);
  }

  /* Espaçamento entre seções reduzido */
  section {
    padding-block: clamp(48px, 12vh, 80px);
  }

  /* Títulos mais compactos */
  h1 {
    font-size: clamp(1.75rem, 8vw, 2.5rem);
    line-height: 1.15;
    margin-bottom: 1rem;
  }

  h2 {
    font-size: clamp(1.5rem, 6vw, 2rem);
    line-height: 1.2;
    margin-bottom: 0.875rem;
  }

  h3 {
    font-size: clamp(1.25rem, 4.5vw, 1.5rem);
    margin-bottom: 0.75rem;
  }

  /* Parágrafos mais legíveis */
  p {
    font-size: 1rem;
    line-height: 1.6;
    max-width: 100%; /* Remove max-width em mobile */
  }
}

/* ====================
   NAVIGATION MOBILE
   ==================== */

@media (max-width: 767px) {
  /* Header fixo com safe area */
  .site-header {
    padding-top: env(safe-area-inset-top);
    padding-bottom: 12px;
  }

  /* Botões de ação com safe area */
  .chat-toggle,
  .hero__cta,
  .contato__cta {
    margin-bottom: env(safe-area-inset-bottom);
  }

  /* Menu mobile full screen */
  .site-header__nav--open {
    position: fixed;
    inset: 0;
    padding-top: calc(env(safe-area-inset-top) + 60px);
    background: rgba(255, 255, 255, 0.98);
    backdrop-filter: blur(20px);
  }
}

/* ====================
   CARDS E GRIDS
   ==================== */

@media (max-width: 767px) {
  /* Cards em coluna única */
  .credenciais__grid,
  .contato__grid,
  .entregaveis__grid {
    grid-template-columns: 1fr;
    gap: 1.25rem;
  }

  /* Para Quem items stack */
  .para-quem__list {
    grid-template-columns: 1fr;
  }

  /* Credenciais cards sem hover em mobile (tap instead) */
  .credenciais__card:hover,
  .entregavel:hover,
  .para-quem__item:hover {
    transform: none; /* Remove hover lift */
  }

  .credenciais__card:active,
  .entregavel:active,
  .para-quem__item:active {
    transform: scale(0.98); /* Tap feedback */
    transition: transform 0.1s ease;
  }
}

/* ====================
   IMAGES
   ==================== */

@media (max-width: 767px) {
  /* Imagens responsivas */
  img {
    max-width: 100%;
    height: auto;
  }

  /* Hero portrait menor em mobile */
  .hero__portrait {
    max-width: 240px;
    margin: 0 auto;
  }

  /* Lazy load com blur placeholder */
  img[loading="lazy"]:not(.loaded) {
    filter: blur(10px);
    transform: scale(1.05);
  }

  img[loading="lazy"].loaded {
    filter: blur(0);
    transform: scale(1);
    transition: filter 0.4s ease, transform 0.4s ease;
  }
}

/* ====================
   MODALS E OVERLAYS
   ==================== */

@media (max-width: 767px) {
  /* Chat widget full width em mobile */
  .chat-panel {
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    max-width: 100%;
    max-height: 80vh;
    border-radius: 16px 16px 0 0;
  }

  /* Cal.com modal ajustado */
  [data-cal-namespace] iframe {
    max-height: 85vh !important;
  }
}

/* ====================
   PERFORMANCE
   ==================== */

@media (max-width: 767px) {
  /* Reduzir complexidade de animações em mobile */
  *,
  *::before,
  *::after {
    animation-duration: 0.3s !important; /* Mais rápido que desktop */
  }

  /* Simplificar gradientes em mobile */
  .hero__background,
  .manifesto__backdrop,
  .contato__background {
    background: var(--bg-primary);
    /* Remove gradientes complexos */
  }

  /* Remover parallax em mobile (performance) */
  .hero__background,
  .manifesto__backdrop {
    transform: none !important;
  }

  /* Reduzir blur effects (GPU intensive) */
  .glass,
  .glass-dark {
    backdrop-filter: none;
    background: rgba(255, 255, 255, 0.95);
  }

  .glass-dark {
    background: rgba(14, 20, 18, 0.95);
  }
}

/* ====================
   TYPOGRAPHY MOBILE
   ==================== */

@media (max-width: 767px) {
  /* Ajustar letter-spacing para mobile */
  h1,
  h2,
  h3 {
    letter-spacing: -0.01em;
  }

  /* Melhor legibilidade em telas pequenas */
  body {
    font-size: 16px;
    line-height: 1.6;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
  }

  /* Evitar texto muito largo */
  p,
  li {
    max-width: 100%;
    overflow-wrap: break-word;
    word-wrap: break-word;
    hyphens: auto;
  }
}

/* ====================
   GESTURES
   ==================== */

@media (max-width: 767px) and (hover: none) {
  /* Remover :hover em dispositivos touch */
  *:hover {
    /* Hover states são ignorados em touch */
  }

  /* Adicionar :active states para feedback táctil */
  button:active,
  a:active,
  [role="button"]:active {
    opacity: 0.7;
    transform: scale(0.98);
  }

  /* Swipe indicator para scroll horizontal */
  .scroll-hint {
    display: flex;
    justify-content: center;
    padding: 8px 0;
  }

  .scroll-hint::after {
    content: '⟶';
    opacity: 0.3;
    animation: swipeHint 2s ease-in-out infinite;
  }

  @keyframes swipeHint {
    0%,
    100% {
      transform: translateX(0);
    }
    50% {
      transform: translateX(10px);
    }
  }
}

/* ====================
   LANDSCAPE MODE
   ==================== */

@media (max-width: 767px) and (orientation: landscape) {
  /* Ajustar altura de seções em landscape */
  section {
    min-height: auto;
    padding-block: clamp(32px, 8vh, 60px);
  }

  /* Chat widget menor em landscape */
  .chat-panel {
    max-height: 70vh;
  }

  /* Hero mais compacto */
  .hero {
    min-height: auto;
    padding-block: 4rem;
  }
}

/* ====================
   SAFE AREAS (notch/camera)
   ==================== */

@supports (padding: env(safe-area-inset-top)) {
  /* Padding para safe areas */
  .site-header {
    padding-top: calc(12px + env(safe-area-inset-top));
  }

  .chat-toggle {
    bottom: calc(24px + env(safe-area-inset-bottom));
    left: calc(24px + env(safe-area-inset-left));
  }

  .whatsapp-button {
    bottom: calc(24px + env(safe-area-inset-bottom));
    right: calc(24px + env(safe-area-inset-right));
  }

  body {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}

/* ====================
   DARK MODE SUPPORT
   ==================== */

@media (prefers-color-scheme: dark) {
  /* Se implementar dark mode no futuro */
  /* Por ora, manter light mode fixo */
}

/* ====================
   ACCESSIBILITY MOBILE
   ==================== */

@media (max-width: 767px) {
  /* Focus mais visível em mobile */
  *:focus-visible {
    outline-width: 3px;
    outline-offset: 4px;
  }

  /* Skip link mais acessível */
  .skip-to-content:focus {
    top: env(safe-area-inset-top, 0);
    left: env(safe-area-inset-left, 0);
    z-index: 10001;
  }
}
